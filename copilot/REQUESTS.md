このプロジェクトは既存のプロジェクト（`./old-projects`はそれへのリンク）をリファクタリングするものです。

既存のプロジェクトは主に以下の技術スタックを使用しています：

backend:
  FastAPI
  SQLAlchemy

frontend:
  solidjs

既存のプロジェクトは色々と綻びがあり、全面的に書き換えようと思っています。

まずは、このプロジェクトが使うDBの一部分をテスト用にimportしたDBを作ってください。
本番用DBは↓で接続できます。(アクセス情報は`~/.pgpass`を参照)

```bash
psql -h 133.40.164.48 -U pfs opdb
```

本番用DBからそれぞれのテーブルの新しいレコードの5%、または最大1000件分を抽出して、新しいDBにインポートしてください。
（様々な制約があるのでそれを回避してください。）
これは、コマンドを1つずつ行うのではなくこれを行うスクリプトを作り実行してください。
`./backend/devel/make_test_db`内に必要なファイルを作成してください。
backendのPython環境はuvで整備してください。(Python3.13を使ってください)

`pg_ctl`コマンドを使い、テスト用のDBを新たに作成する必要があるでしょう。
例えば`~/pgdata_for_pfs_obslog_test`などにデータを保存してください。

また、psqlを使うときは結果が勝手にlessなどにパイプされる可能性があることに留意してください。
そうなるとAgentの動作が想定通りにいかないかもしれません。

今後に必要と思われる情報（例えばテスト用DBの場所や接続情報など）は`.github/copilot-instructions.md`に記載してください。
